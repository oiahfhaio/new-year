<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no, maximum-scale=1.0">
    <title>2026 æ–°å¹´å¿«ä¹</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Cinzel:wght@700&family=Noto+Serif+SC:wght@300;700&display=swap');

        body, html {
            margin: 0;
            padding: 0;
            width: 100%;
            height: 100%;
            overflow: hidden;
            background-color: #050505;
            font-family: 'Noto Serif SC', serif;
        }

        /* --- 1. å¼€å±å¼•å¯¼é®ç½© (å…¨å±å¯ç‚¹) --- */
        #start-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.92); /* èƒŒæ™¯æ›´é»‘ä¸€ç‚¹ï¼Œçªå‡ºæŒ‰é’® */
            z-index: 999;
            display: flex;
            justify-content: center;
            align-items: center;
            transition: opacity 0.8s ease;
            cursor: pointer; /* é¼ æ ‡å˜æ‰‹å‹ */
        }

        .start-btn {
            font-size: 1.4rem;
            color: #FFD700;
            border: 2px solid #FFD700;
            padding: 18px 45px;
            border-radius: 50px;
            background: rgba(255, 215, 0, 0.1);
            text-align: center;
            letter-spacing: 3px;
            font-weight: bold;
            box-shadow: 0 0 30px rgba(255, 215, 0, 0.4);
            animation: pulse 2s infinite;
            pointer-events: none; /* è®©ç‚¹å‡»äº‹ä»¶ç©¿é€åˆ°çˆ¶çº§ overlay */
        }

        @keyframes pulse {
            0% { transform: scale(1); box-shadow: 0 0 0 0 rgba(255, 215, 0, 0.7); }
            70% { transform: scale(1.05); box-shadow: 0 0 0 25px rgba(255, 215, 0, 0); }
            100% { transform: scale(1); box-shadow: 0 0 0 0 rgba(255, 215, 0, 0); }
        }

        canvas {
            position: absolute;
            top: 0;
            left: 0;
            z-index: 1;
        }

        /* éŸ³ä¹æŒ‰é’® */
        .music-btn {
            position: fixed;
            top: 20px;
            right: 20px;
            z-index: 100;
            width: 40px;
            height: 40px;
            background: rgba(255, 255, 255, 0.15);
            border: 1px solid rgba(255, 215, 0, 0.5);
            border-radius: 50%;
            display: flex;
            justify-content: center;
            align-items: center;
            cursor: pointer;
            backdrop-filter: blur(5px);
            animation: musicRotate 4s linear infinite;
            opacity: 0; /* åˆå§‹éšè— */
            transition: opacity 1s;
        }
        
        .music-btn.paused {
            animation-play-state: paused;
            opacity: 0.5;
        }

        @keyframes musicRotate {
            from { transform: rotate(0deg); }
            to { transform: rotate(360deg); }
        }

        /* å¼¹å¹•å®¹å™¨ */
        #danmaku-container {
            position: absolute;
            top: 0; left: 0; width: 100%; height: 100%;
            z-index: 5; pointer-events: none; overflow: hidden;
        }
        .danmaku-item {
            position: absolute; white-space: nowrap; color: rgba(255,255,255,0.9);
            font-size: 1.1rem; font-weight: 300;
            text-shadow: 0 0 5px rgba(0,0,0,0.8), 0 0 10px rgba(255,215,0,0.4);
            opacity: 0; animation: slideLeft linear forwards;
            font-family: 'Noto Serif SC', serif;
        }

        /* ä¸­é—´æ–‡å­— */
        .center-text {
            position: absolute;
            top: 50%; left: 50%;
            transform: translate(-50%, -50%);
            z-index: 10;
            text-align: center;
            width: 90%;
            pointer-events: none;
            background: radial-gradient(circle, rgba(0,0,0,0.5) 0%, rgba(0,0,0,0) 70%);
            padding: 30px; border-radius: 50%;
        }

        .year {
            font-family: 'Cinzel', serif;
            font-size: 4.5rem;
            font-weight: 800;
            background: linear-gradient(to bottom, #fff 30%, #ffd700 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            text-shadow: 0 0 30px rgba(255, 215, 0, 0.6);
            margin-bottom: 10px;
        }
        .blessing-main { font-size: 1.2rem; color: #ffecd2; letter-spacing: 4px; margin-bottom: 15px; }
        .name-box {
            font-size: 2rem; color: #fff; font-weight: 700;
            text-shadow: 0 0 20px rgba(255, 255, 255, 0.9);
            border-bottom: 2px solid rgba(212, 175, 55, 0.7);
            display: inline-block; padding-bottom: 5px;
        }

        @keyframes slideLeft {
            0% { transform: translateX(100vw); opacity: 0; }
            5% { opacity: 1; }
            95% { opacity: 1; }
            100% { transform: translateX(-100%); opacity: 0; }
        }

        @media screen and (max-width: 480px) {
            .year { font-size: 3.8rem; }
            .name-box { font-size: 1.6rem; }
            .danmaku-item { font-size: 0.9rem; }
        }
    </style>
</head>
<body>

    <!-- åœ¨çº¿éŸ³ä¹ (ç½‘æ˜“äº‘éŸ³ä¹é“¾æ¥æœ‰æ—¶ä¼šå¤±æ•ˆï¼Œå¦‚æœæ²¡å£°éŸ³ï¼Œè¯·æŒ‰ç…§ä¸‹æ–‡æ–¹æ³•æ¢æˆæœ¬åœ°æ–‡ä»¶) -->
    <audio id="bgm" loop preload="auto">
        <source src="Vexento - Lonely Dance.mp3" type="audio/mpeg">
    </audio>

    <!-- å¼€å±é®ç½© (ç‚¹å‡»æ•´ä¸ªå±å¹•éƒ½æœ‰æ•ˆ) -->
    <div id="start-overlay">
        <div class="start-btn">
            ğŸ‘‡ ç‚¹å‡»å±å¹•<br>å¼€å¯ 2026 ç››å…¸
        </div>
    </div>

    <!-- éŸ³ä¹æŒ‰é’® -->
    <div class="music-btn" id="musicBtn">
        <div style="font-size: 20px;">ğŸµ</div>
    </div>

    <canvas id="canvas"></canvas>
    <div id="danmaku-container"></div>

    <div class="center-text">
        <div class="year">2026</div>
        <div class="blessing-main">æ–°å²åºå¼€ Â· å…±èµ´å±±æµ·</div>
        <div class="name-box" id="name-display">To: æœ‹å‹</div>
    </div>

    <script>
        // --- 1. ä¿®å¤åçš„å¯åŠ¨é€»è¾‘ ---
        const startOverlay = document.getElementById('start-overlay');
        const bgm = document.getElementById('bgm');
        const musicBtn = document.getElementById('musicBtn');
        let hasStarted = false;

        function startApp() {
            if (hasStarted) return; // é˜²æ­¢é‡å¤è§¦å‘
            hasStarted = true;

            // 1. ç•Œé¢ä¼˜å…ˆï¼šç«‹åˆ»éšè—é®ç½©
            startOverlay.style.opacity = '0';
            setTimeout(() => {
                startOverlay.style.display = 'none';
            }, 800);

            // 2. æ˜¾ç¤ºéŸ³ä¹æŒ‰é’®
            musicBtn.style.opacity = '0.9';
            musicBtn.classList.remove('paused');

            // 3. å°è¯•æ’­æ”¾éŸ³ä¹ (åŠ äº†é”™è¯¯æ•è·ï¼Œé˜²æ­¢æŠ¥é”™å¡æ­»)
            bgm.play().then(() => {
                console.log("Music started");
            }).catch((e) => {
                console.log("Audio autoplay blocked or failed:", e);
                // å°±ç®—éŸ³ä¹å¤±è´¥ï¼Œç•Œé¢ä¹Ÿå·²ç»è¿›å»äº†ï¼Œä¸å½±å“è§†è§‰
                musicBtn.classList.add('paused'); 
            });

            // 4. ç«‹å³ç‡ƒæ”¾å¼€åœºçƒŸèŠ±
            for(let i=0; i<5; i++) {
                setTimeout(() => {
                    createFirework(window.innerWidth/2 + (Math.random()-0.5)*300, window.innerHeight * 0.3);
                }, i*400);
            }
        }

        // åŒæ—¶ç»‘å®š è§¦æ‘¸ å’Œ ç‚¹å‡» äº‹ä»¶ï¼Œç¡®ä¿ä¸‡æ— ä¸€å¤±
        startOverlay.addEventListener('click', startApp);
        startOverlay.addEventListener('touchstart', startApp, {passive: true});

        
        // --- éŸ³ä¹æŒ‰é’®æ§åˆ¶ ---
        musicBtn.addEventListener('click', (e) => {
            e.stopPropagation();
            if (bgm.paused) {
                bgm.play();
                musicBtn.classList.remove('paused');
            } else {
                bgm.pause();
                musicBtn.classList.add('paused');
            }
        });

        // --- 2. åå­—ä¸å¼¹å¹• ---
        const params = new URLSearchParams(window.location.search);
        let nameText = params.get('name');
        if (!nameText) nameText = "æœ‹å‹"; 
        document.getElementById('name-display').innerText = "To: " + nameText;

        const danmakuContainer = document.getElementById('danmaku-container');
        const templates = [
            "ç¥ {n} 2026 è´¢æºå¹¿è¿›", "æ„¿ {n} å¤©å¤©å¼€å¿ƒ", "{n} æ–°å¹´å¿«ä¹ ä¸‡äº‹èƒœæ„",
            "ç¥ {n} é¢œå€¼çˆ†è¡¨", "æ„¿ {n} å²å²å¹³å®‰", "{n} 2026 æš´å¯Œæš´ç˜¦",
            "ç¥ {n} å¥½è¿è¿è¿", "æ„¿ {n} å¿ƒæƒ³äº‹æˆ", "{n} å¿…å®š å‡èŒåŠ è–ª",
            "ç¥ {n} æ°¸è¿œå°‘å¹´", "æ„¿ {n} æ‰€æ±‚çš†å¦‚æ„¿", "ç¥ {n} å‰ç¨‹ä¼¼é”¦"
        ];
        function createDanmaku() {
            const div = document.createElement('div');
            div.className = 'danmaku-item';
            const template = templates[Math.floor(Math.random() * templates.length)];
            div.innerText = template.replace(/{n}/g, nameText);
            div.style.top = Math.random() * 80 + 5 + '%';
            div.style.fontSize = (Math.random() * 0.5 + 0.9) + 'rem';
            const isGold = Math.random() > 0.6;
            div.style.color = isGold ? '#FFD700' : 'rgba(255,255,255,0.9)';
            if(isGold) div.style.textShadow = '0 0 10px #FFD700';
            div.style.animationDuration = (Math.random() * 7 + 8) + 's';
            danmakuContainer.appendChild(div);
            setTimeout(() => { div.remove(); }, 15000);
        }
        setInterval(createDanmaku, 600);

        // --- 3. çƒŸèŠ±å¼•æ“ ---
        const canvas = document.getElementById('canvas');
        const ctx = canvas.getContext('2d');
        let w, h;
        let particles = [];

        function resize() { w = canvas.width = window.innerWidth; h = canvas.height = window.innerHeight; }
        window.addEventListener('resize', resize);
        resize();

        const r = (min, max) => Math.random() * (max - min) + min;

        class Particle {
            constructor(x, y, vx, vy, color) {
                this.x = x; this.y = y; this.vx = vx; this.vy = vy;
                this.color = color; this.alpha = 1;
                this.gravity = 0.06; this.friction = 0.95; this.decay = r(0.015, 0.025);
            }
            update() {
                this.vx *= this.friction; this.vy *= this.friction;
                this.vy += this.gravity; this.x += this.vx; this.y += this.vy;
                this.alpha -= this.decay;
            }
            draw() {
                ctx.save(); ctx.globalCompositeOperation = 'lighter'; ctx.globalAlpha = this.alpha;
                ctx.fillStyle = this.color; ctx.beginPath(); ctx.arc(this.x, this.y, 2, 0, Math.PI * 2);
                ctx.fill(); ctx.restore();
            }
        }

        function createFirework(x, y) {
            const shapes = ['heart', 'heart', 'star', 'circle', 'circle']; 
            const type = shapes[Math.floor(Math.random() * shapes.length)];
            let baseHue = Math.floor(Math.random() * 360);
            if (type === 'heart') baseHue = 340; 
            const particleCount = (type === 'heart' || type === 'star') ? 100 : 150;
            
            for (let i = 0; i < particleCount; i++) {
                let vx, vy;
                if (type === 'heart') {
                    const angle = (Math.PI * 2 * i) / particleCount;
                    const pX = 16 * Math.pow(Math.sin(angle), 3);
                    const pY = -(13 * Math.cos(angle) - 5 * Math.cos(2 * angle) - 2 * Math.cos(3 * angle) - Math.cos(4 * angle));
                    const vel = r(0.18, 0.28); vx = pX * vel; vy = pY * vel;
                } else if (type === 'star') {
                    const angle = (Math.PI * 2 * i) / particleCount;
                    const radius = 5 + 3 * Math.cos(5 * angle); 
                    const vel = r(0.6, 1.6);
                    vx = Math.cos(angle) * radius * vel * 0.5; vy = Math.sin(angle) * radius * vel * 0.5;
                } else {
                    const angle = Math.random() * Math.PI * 2; const speed = r(4, 11);
                    vx = Math.cos(angle) * speed; vy = Math.sin(angle) * speed;
                }
                particles.push(new Particle(x, y, vx, vy, `hsl(${baseHue}, 90%, 60%)`));
            }
        }

        function loop() {
            ctx.fillStyle = 'rgba(5, 5, 5, 0.2)'; ctx.fillRect(0, 0, w, h);
            for (let i = particles.length - 1; i >= 0; i--) {
                const p = particles[i]; p.update(); p.draw();
                if (p.alpha <= 0) particles.splice(i, 1);
            }
            if (Math.random() < 0.05) createFirework(Math.random() * w, r(h * 0.1, h * 0.5));
            requestAnimationFrame(loop);
        }

        // ç‚¹å‡»å±å¹•æ”¾çƒŸèŠ±
        window.addEventListener('pointerdown', (e) => {
            // å¦‚æœé®ç½©è¿˜æ²¡æ¶ˆå¤±ï¼Œä¸è§¦å‘çƒŸèŠ±
            if(startOverlay.style.display !== 'none') return;

            createFirework(e.clientX, e.clientY);
            const div = document.createElement('div');
            div.className = 'danmaku-item';
            div.innerText = "ç¥ " + nameText + " 2026 ä¸‡äº‹å¦‚æ„";
            div.style.top = e.clientY + 'px'; div.style.color = '#FFD700';
            div.style.fontSize = '1.5rem'; div.style.animationDuration = '5s';
            danmakuContainer.appendChild(div);
            setTimeout(() => div.remove(), 5000);
        });

        loop();
    </script>
</body>
</html>
